{"ast":null,"code":"var _jsxFileName = \"/Users/baiyixin/Desktop/semantic-search-visualization-new/src/components/AcademicPaperSearch.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Papa from 'papaparse';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AcademicPaperSearch = () => {\n  _s();\n  const [papers, setPapers] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"information visualization\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedPaper, setSelectedPaper] = useState(null);\n  const [highlightedPapers, setHighlightedPapers] = useState([]);\n  const svgRef = useRef(null);\n\n  // Load and process the data\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoading(true);\n      try {\n        // Load papers from file\n        const response = await fetch('/paste.txt');\n        const papersText = await response.text();\n        const parsedData = Papa.parse(papersText, {\n          delimiter: '\\t',\n          header: true,\n          skipEmptyLines: true,\n          dynamicTyping: true\n        });\n\n        // Process papers and create synthetic embeddings\n        const processedPapers = parsedData.data.filter(paper => paper.title && paper.abstract).map((paper, index) => {\n          // Generate synthetic embedding\n          const embedding = Array(384).fill(0).map(() => Math.random() - 0.5);\n          const magnitude = Math.sqrt(embedding.reduce((sum, val) => sum + val * val, 0));\n          const normalizedEmbedding = embedding.map(val => val / magnitude);\n          return {\n            id: paper.doi || `paper-${index}`,\n            title: paper.title || 'Untitled Paper',\n            authors: paper.authors || 'Unknown Authors',\n            abstract: paper.abstract || 'No abstract available',\n            venue: paper.venue || 'Unknown Venue',\n            year: paper.year || 'Unknown Year',\n            type: paper.type || 'Unknown Type',\n            link: paper.link || '#',\n            embedding: normalizedEmbedding,\n            x: (Math.random() * 2 - 1) * 0.8,\n            y: (Math.random() * 2 - 1) * 0.8,\n            cluster: Math.floor(Math.random() * 5)\n          };\n        });\n        setPapers(processedPapers);\n\n        // Perform initial search\n        const results = performSearch(processedPapers, searchQuery);\n        setSearchResults(results);\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n      }\n      setIsLoading(false);\n    };\n    loadData();\n  }, []);\n\n  // Cosine similarity calculation\n  const cosineSimilarity = (vecA, vecB) => {\n    if (!vecA || !vecB || vecA.length !== vecB.length) {\n      return 0;\n    }\n    let dotProduct = 0;\n    let normA = 0;\n    let normB = 0;\n    for (let i = 0; i < vecA.length; i++) {\n      dotProduct += vecA[i] * vecB[i];\n      normA += vecA[i] * vecA[i];\n      normB += vecB[i] * vecB[i];\n    }\n    if (normA === 0 || normB === 0) {\n      return 0;\n    }\n    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\n  };\n\n  // Perform semantic search\n  const performSearch = (papersList, query) => {\n    if (!query.trim() || !papersList.length) {\n      return papersList;\n    }\n\n    // Create a simulated query embedding\n    const queryEmbedding = Array(384).fill(0).map(() => Math.random() - 0.5);\n    const magnitude = Math.sqrt(queryEmbedding.reduce((sum, val) => sum + val * val, 0));\n    const normalizedQueryEmbedding = queryEmbedding.map(val => val / magnitude);\n    const queryTerms = query.toLowerCase().split(/\\s+/);\n    const results = papersList.map(paper => {\n      // Calculate embedding similarity\n      const similarity = cosineSimilarity(normalizedQueryEmbedding, paper.embedding);\n\n      // Boost papers that contain query terms in title/abstract\n      let relevanceBoost = 0;\n      const titleLower = paper.title.toLowerCase();\n      const abstractLower = paper.abstract.toLowerCase();\n      queryTerms.forEach(term => {\n        if (titleLower.includes(term)) relevanceBoost += 0.2;\n        if (abstractLower.includes(term)) relevanceBoost += 0.1;\n      });\n      const finalScore = Math.min(0.95, similarity * 0.6 + relevanceBoost);\n      return {\n        ...paper,\n        score: finalScore\n      };\n    }).sort((a, b) => b.score - a.score);\n\n    // Simulate UMAP by arranging papers in a spiral pattern based on score\n    const sortedPapers = [...results].sort((a, b) => b.score - a.score);\n    const scoredPapers = sortedPapers.map((paper, i) => {\n      const angle = i * 0.5;\n      const radius = 0.1 + (1 - paper.score) * 0.9;\n      return {\n        ...paper,\n        x: Math.cos(angle) * radius,\n        y: Math.sin(angle) * radius\n      };\n    });\n    return scoredPapers;\n  };\n\n  // Handle search query changes\n  const handleSearchChange = e => {\n    setSearchQuery(e.target.value);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    const results = performSearch(papers, searchQuery);\n    setSearchResults(results);\n  };\n\n  // Handle paper selection\n  const handlePaperSelect = paper => {\n    setSelectedPaper(paper);\n  };\n\n  // Handle paper highlighting\n  const handlePaperHighlight = paper => {\n    if (paper) {\n      setHighlightedPapers([paper]);\n    } else {\n      setHighlightedPapers([]);\n    }\n  };\n\n  // Render the scatter plot\n  useEffect(() => {\n    if (!searchResults.length || !svgRef.current) return;\n    const svg = d3.select(svgRef.current);\n    const width = svgRef.current.clientWidth || 600;\n    const height = svgRef.current.clientHeight || 500;\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 20,\n      left: 20\n    };\n\n    // Clear previous drawing\n    svg.selectAll(\"*\").remove();\n\n    // Define scales\n    const xScale = d3.scaleLinear().domain(d3.extent(searchResults, d => d.x)).range([margin.left, width - margin.right]);\n    const yScale = d3.scaleLinear().domain(d3.extent(searchResults, d => d.y)).range([height - margin.bottom, margin.top]);\n\n    // Color scale for similarity scores\n    const colorScale = d3.scaleSequential().domain([0, 1]).interpolator(d3.interpolateBlues);\n\n    // Size scale for points\n    const sizeScale = d3.scaleLinear().domain([0, 1]).range([3, 10]);\n\n    // Add legend\n    const legendGroup = svg.append(\"g\").attr(\"transform\", `translate(${width - 100}, 20)`);\n    legendGroup.append(\"text\").attr(\"x\", 0).attr(\"y\", 0).text(\"Score\").style(\"font-weight\", \"bold\").style(\"font-size\", \"12px\");\n    const legendValues = [0.2, 0.4, 0.6, 0.8];\n    legendValues.forEach((value, i) => {\n      legendGroup.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", i * 20 + 20).attr(\"r\", sizeScale(value)).attr(\"fill\", colorScale(value));\n      legendGroup.append(\"text\").attr(\"x\", 25).attr(\"y\", i * 20 + 24).text(`${Math.round(value * 100)}%`).style(\"font-size\", \"12px\");\n    });\n\n    // Draw points\n    const points = svg.selectAll(\"circle.datapoint\").data(searchResults).enter().append(\"circle\").attr(\"class\", \"datapoint\").attr(\"cx\", d => xScale(d.x)).attr(\"cy\", d => yScale(d.y)).attr(\"r\", d => sizeScale(d.score)).attr(\"fill\", d => colorScale(d.score)).attr(\"opacity\", 0.8).attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 0.5).style(\"cursor\", \"pointer\").on(\"mouseover\", (event, d) => {\n      d3.select(event.target).attr(\"stroke\", \"#333\").attr(\"stroke-width\", 1.5).attr(\"r\", d => sizeScale(d.score) * 1.5);\n      handlePaperHighlight(d);\n      handlePaperSelect(d);\n    }).on(\"mouseout\", event => {\n      d3.select(event.target).attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 0.5).attr(\"r\", d => sizeScale(d.score));\n      handlePaperHighlight(null);\n    }).on(\"click\", (event, d) => {\n      handlePaperSelect(d);\n    });\n\n    // Add tooltip\n    const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"border\", \"1px solid #ddd\").style(\"border-radius\", \"4px\").style(\"padding\", \"8px\").style(\"font-size\", \"12px\").style(\"pointer-events\", \"none\").style(\"z-index\", \"10\");\n    points.on(\"mouseover\", (event, d) => {\n      tooltip.style(\"visibility\", \"visible\").html(`\n          <strong>${d.title}</strong><br>\n          ${d.authors}<br>\n          Score: ${(d.score * 100).toFixed(1)}%\n        `);\n    }).on(\"mousemove\", event => {\n      tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n    }).on(\"mouseout\", () => {\n      tooltip.style(\"visibility\", \"hidden\");\n    });\n\n    // Add title\n    svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", margin.top / 2).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"14px\").style(\"font-weight\", \"bold\").text(`${searchResults.length} documents by similarity`);\n    return () => {\n      // Clean up\n      tooltip.remove();\n    };\n  }, [searchResults]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-6xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"Similarity Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchQuery,\n          onChange: handleSearchChange,\n          placeholder: \"Enter search query...\",\n          className: \"flex-grow p-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"bg-blue-600 text-white px-4 py-2 rounded\",\n          disabled: isLoading,\n          children: isLoading ? 'Loading...' : 'Search'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:w-2/3 border rounded shadow-sm bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: svgRef,\n          width: \"100%\",\n          height: \"500\",\n          className: \"w-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:w-1/3 border rounded shadow-sm bg-white p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-3\",\n          children: \"Selected Paper\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), selectedPaper ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-medium\",\n            children: selectedPaper.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-700 mt-1\",\n            children: selectedPaper.authors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: [selectedPaper.venue, \", \", selectedPaper.year]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-sm bg-gray-50 p-2 rounded max-h-40 overflow-y-auto\",\n            children: selectedPaper.abstract\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Similarity Score:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this), \" \", (selectedPaper.score * 100).toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this), selectedPaper.link && /*#__PURE__*/_jsxDEV(\"a\", {\n            href: selectedPaper.link,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"text-sm text-blue-600 hover:underline mt-2 block\",\n            children: \"View Paper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"Hover over a point to see paper details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-3\",\n        children: \"Top Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: searchResults.slice(0, 6).map(paper => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded p-3 bg-white shadow-sm hover:shadow-md transition-shadow\",\n          onMouseEnter: () => handlePaperSelect(paper),\n          style: {\n            borderColor: selectedPaper && selectedPaper.id === paper.id ? '#3b82f6' : '#e5e7eb'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-medium\",\n            children: paper.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-700\",\n            children: paper.authors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-sm text-gray-600 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: paper.venue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Score: \", (paper.score * 100).toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this)]\n        }, paper.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n};\n_s(AcademicPaperSearch, \"Q0/l12+8L1gt8GIPT/VbL3VjYE0=\");\n_c = AcademicPaperSearch;\nexport default AcademicPaperSearch;\nvar _c;\n$RefreshReg$(_c, \"AcademicPaperSearch\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Papa","d3","_","jsxDEV","_jsxDEV","AcademicPaperSearch","_s","papers","setPapers","searchQuery","setSearchQuery","searchResults","setSearchResults","isLoading","setIsLoading","selectedPaper","setSelectedPaper","highlightedPapers","setHighlightedPapers","svgRef","loadData","response","fetch","papersText","text","parsedData","parse","delimiter","header","skipEmptyLines","dynamicTyping","processedPapers","data","filter","paper","title","abstract","map","index","embedding","Array","fill","Math","random","magnitude","sqrt","reduce","sum","val","normalizedEmbedding","id","doi","authors","venue","year","type","link","x","y","cluster","floor","results","performSearch","error","console","cosineSimilarity","vecA","vecB","length","dotProduct","normA","normB","i","papersList","query","trim","queryEmbedding","normalizedQueryEmbedding","queryTerms","toLowerCase","split","similarity","relevanceBoost","titleLower","abstractLower","forEach","term","includes","finalScore","min","score","sort","a","b","sortedPapers","scoredPapers","angle","radius","cos","sin","handleSearchChange","e","target","value","handleSearch","preventDefault","handlePaperSelect","handlePaperHighlight","current","svg","select","width","clientWidth","height","clientHeight","margin","top","right","bottom","left","selectAll","remove","xScale","scaleLinear","domain","extent","d","range","yScale","colorScale","scaleSequential","interpolator","interpolateBlues","sizeScale","legendGroup","append","attr","style","legendValues","round","points","enter","on","event","tooltip","html","toFixed","pageY","pageX","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","disabled","ref","href","rel","slice","onMouseEnter","borderColor","_c","$RefreshReg$"],"sources":["/Users/baiyixin/Desktop/semantic-search-visualization-new/src/components/AcademicPaperSearch.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Papa from 'papaparse';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst AcademicPaperSearch = () => {\n  const [papers, setPapers] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"information visualization\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedPaper, setSelectedPaper] = useState(null);\n  const [highlightedPapers, setHighlightedPapers] = useState([]);\n  \n  const svgRef = useRef(null);\n  \n  // Load and process the data\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoading(true);\n      try {\n        // Load papers from file\n        const response = await fetch('/paste.txt');\n        const papersText = await response.text();\n        \n        const parsedData = Papa.parse(papersText, {\n          delimiter: '\\t',\n          header: true,\n          skipEmptyLines: true,\n          dynamicTyping: true\n        });\n        \n        // Process papers and create synthetic embeddings\n        const processedPapers = parsedData.data\n          .filter(paper => paper.title && paper.abstract)\n          .map((paper, index) => {\n            // Generate synthetic embedding\n            const embedding = Array(384).fill(0).map(() => Math.random() - 0.5);\n            const magnitude = Math.sqrt(embedding.reduce((sum, val) => sum + val * val, 0));\n            const normalizedEmbedding = embedding.map(val => val / magnitude);\n            \n            return {\n              id: paper.doi || `paper-${index}`,\n              title: paper.title || 'Untitled Paper',\n              authors: paper.authors || 'Unknown Authors',\n              abstract: paper.abstract || 'No abstract available',\n              venue: paper.venue || 'Unknown Venue',\n              year: paper.year || 'Unknown Year',\n              type: paper.type || 'Unknown Type',\n              link: paper.link || '#',\n              embedding: normalizedEmbedding,\n              x: (Math.random() * 2 - 1) * 0.8,\n              y: (Math.random() * 2 - 1) * 0.8,\n              cluster: Math.floor(Math.random() * 5),\n            };\n          });\n        \n        setPapers(processedPapers);\n        \n        // Perform initial search\n        const results = performSearch(processedPapers, searchQuery);\n        setSearchResults(results);\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n      }\n      setIsLoading(false);\n    };\n    \n    loadData();\n  }, []);\n  \n  // Cosine similarity calculation\n  const cosineSimilarity = (vecA, vecB) => {\n    if (!vecA || !vecB || vecA.length !== vecB.length) {\n      return 0;\n    }\n    \n    let dotProduct = 0;\n    let normA = 0;\n    let normB = 0;\n    \n    for (let i = 0; i < vecA.length; i++) {\n      dotProduct += vecA[i] * vecB[i];\n      normA += vecA[i] * vecA[i];\n      normB += vecB[i] * vecB[i];\n    }\n    \n    if (normA === 0 || normB === 0) {\n      return 0;\n    }\n    \n    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\n  };\n  \n  // Perform semantic search\n  const performSearch = (papersList, query) => {\n    if (!query.trim() || !papersList.length) {\n      return papersList;\n    }\n    \n    // Create a simulated query embedding\n    const queryEmbedding = Array(384).fill(0).map(() => Math.random() - 0.5);\n    const magnitude = Math.sqrt(queryEmbedding.reduce((sum, val) => sum + val * val, 0));\n    const normalizedQueryEmbedding = queryEmbedding.map(val => val / magnitude);\n    \n    const queryTerms = query.toLowerCase().split(/\\s+/);\n    \n    const results = papersList.map(paper => {\n      // Calculate embedding similarity\n      const similarity = cosineSimilarity(normalizedQueryEmbedding, paper.embedding);\n      \n      // Boost papers that contain query terms in title/abstract\n      let relevanceBoost = 0;\n      const titleLower = paper.title.toLowerCase();\n      const abstractLower = paper.abstract.toLowerCase();\n      \n      queryTerms.forEach(term => {\n        if (titleLower.includes(term)) relevanceBoost += 0.2;\n        if (abstractLower.includes(term)) relevanceBoost += 0.1;\n      });\n      \n      const finalScore = Math.min(0.95, (similarity * 0.6) + relevanceBoost);\n      \n      return {\n        ...paper,\n        score: finalScore\n      };\n    }).sort((a, b) => b.score - a.score);\n    \n    // Simulate UMAP by arranging papers in a spiral pattern based on score\n    const sortedPapers = [...results].sort((a, b) => b.score - a.score);\n    \n    const scoredPapers = sortedPapers.map((paper, i) => {\n      const angle = i * 0.5;\n      const radius = 0.1 + (1 - paper.score) * 0.9;\n      \n      return {\n        ...paper,\n        x: Math.cos(angle) * radius,\n        y: Math.sin(angle) * radius\n      };\n    });\n    \n    return scoredPapers;\n  };\n  \n  // Handle search query changes\n  const handleSearchChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n  \n  const handleSearch = (e) => {\n    e.preventDefault();\n    const results = performSearch(papers, searchQuery);\n    setSearchResults(results);\n  };\n  \n  // Handle paper selection\n  const handlePaperSelect = (paper) => {\n    setSelectedPaper(paper);\n  };\n  \n  // Handle paper highlighting\n  const handlePaperHighlight = (paper) => {\n    if (paper) {\n      setHighlightedPapers([paper]);\n    } else {\n      setHighlightedPapers([]);\n    }\n  };\n  \n  // Render the scatter plot\n  useEffect(() => {\n    if (!searchResults.length || !svgRef.current) return;\n    \n    const svg = d3.select(svgRef.current);\n    const width = svgRef.current.clientWidth || 600;\n    const height = svgRef.current.clientHeight || 500;\n    const margin = { top: 20, right: 20, bottom: 20, left: 20 };\n    \n    // Clear previous drawing\n    svg.selectAll(\"*\").remove();\n    \n    // Define scales\n    const xScale = d3.scaleLinear()\n      .domain(d3.extent(searchResults, d => d.x))\n      .range([margin.left, width - margin.right]);\n    \n    const yScale = d3.scaleLinear()\n      .domain(d3.extent(searchResults, d => d.y))\n      .range([height - margin.bottom, margin.top]);\n    \n    // Color scale for similarity scores\n    const colorScale = d3.scaleSequential()\n      .domain([0, 1])\n      .interpolator(d3.interpolateBlues);\n    \n    // Size scale for points\n    const sizeScale = d3.scaleLinear()\n      .domain([0, 1])\n      .range([3, 10]);\n    \n    // Add legend\n    const legendGroup = svg.append(\"g\")\n      .attr(\"transform\", `translate(${width - 100}, 20)`);\n    \n    legendGroup.append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .text(\"Score\")\n      .style(\"font-weight\", \"bold\")\n      .style(\"font-size\", \"12px\");\n    \n    const legendValues = [0.2, 0.4, 0.6, 0.8];\n    legendValues.forEach((value, i) => {\n      legendGroup.append(\"circle\")\n        .attr(\"cx\", 10)\n        .attr(\"cy\", i * 20 + 20)\n        .attr(\"r\", sizeScale(value))\n        .attr(\"fill\", colorScale(value));\n      \n      legendGroup.append(\"text\")\n        .attr(\"x\", 25)\n        .attr(\"y\", i * 20 + 24)\n        .text(`${Math.round(value * 100)}%`)\n        .style(\"font-size\", \"12px\");\n    });\n    \n    // Draw points\n    const points = svg.selectAll(\"circle.datapoint\")\n      .data(searchResults)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"datapoint\")\n      .attr(\"cx\", d => xScale(d.x))\n      .attr(\"cy\", d => yScale(d.y))\n      .attr(\"r\", d => sizeScale(d.score))\n      .attr(\"fill\", d => colorScale(d.score))\n      .attr(\"opacity\", 0.8)\n      .attr(\"stroke\", \"#fff\")\n      .attr(\"stroke-width\", 0.5)\n      .style(\"cursor\", \"pointer\")\n      .on(\"mouseover\", (event, d) => {\n        d3.select(event.target)\n          .attr(\"stroke\", \"#333\")\n          .attr(\"stroke-width\", 1.5)\n          .attr(\"r\", d => sizeScale(d.score) * 1.5);\n        handlePaperHighlight(d);\n        handlePaperSelect(d);\n      })\n      .on(\"mouseout\", (event) => {\n        d3.select(event.target)\n          .attr(\"stroke\", \"#fff\")\n          .attr(\"stroke-width\", 0.5)\n          .attr(\"r\", d => sizeScale(d.score));\n        handlePaperHighlight(null);\n      })\n      .on(\"click\", (event, d) => {\n        handlePaperSelect(d);\n      });\n    \n    // Add tooltip\n    const tooltip = d3.select(\"body\").append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"position\", \"absolute\")\n      .style(\"visibility\", \"hidden\")\n      .style(\"background-color\", \"white\")\n      .style(\"border\", \"1px solid #ddd\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"padding\", \"8px\")\n      .style(\"font-size\", \"12px\")\n      .style(\"pointer-events\", \"none\")\n      .style(\"z-index\", \"10\");\n    \n    points.on(\"mouseover\", (event, d) => {\n      tooltip.style(\"visibility\", \"visible\")\n        .html(`\n          <strong>${d.title}</strong><br>\n          ${d.authors}<br>\n          Score: ${(d.score * 100).toFixed(1)}%\n        `);\n    })\n    .on(\"mousemove\", (event) => {\n      tooltip\n        .style(\"top\", (event.pageY - 10) + \"px\")\n        .style(\"left\", (event.pageX + 10) + \"px\");\n    })\n    .on(\"mouseout\", () => {\n      tooltip.style(\"visibility\", \"hidden\");\n    });\n    \n    // Add title\n    svg.append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", margin.top / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"14px\")\n      .style(\"font-weight\", \"bold\")\n      .text(`${searchResults.length} documents by similarity`);\n    \n    return () => {\n      // Clean up\n      tooltip.remove();\n    };\n    \n  }, [searchResults]);\n  \n  return (\n    <div className=\"w-full max-w-6xl mx-auto\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold mb-4\">Similarity Search</h1>\n        <form onSubmit={handleSearch} className=\"flex gap-2\">\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={handleSearchChange}\n            placeholder=\"Enter search query...\"\n            className=\"flex-grow p-2 border rounded\"\n          />\n          <button \n            type=\"submit\" \n            className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n            disabled={isLoading}\n          >\n            {isLoading ? 'Loading...' : 'Search'}\n          </button>\n        </form>\n      </div>\n      \n      <div className=\"flex flex-col md:flex-row gap-6\">\n        <div className=\"md:w-2/3 border rounded shadow-sm bg-white\">\n          <svg \n            ref={svgRef} \n            width=\"100%\" \n            height=\"500\" \n            className=\"w-full\"\n          ></svg>\n        </div>\n        \n        <div className=\"md:w-1/3 border rounded shadow-sm bg-white p-4\">\n          <h2 className=\"text-lg font-semibold mb-3\">Selected Paper</h2>\n          {selectedPaper ? (\n            <div>\n              <h3 className=\"font-medium\">{selectedPaper.title}</h3>\n              <p className=\"text-sm text-gray-700 mt-1\">{selectedPaper.authors}</p>\n              <p className=\"text-sm text-gray-600 mt-1\">{selectedPaper.venue}, {selectedPaper.year}</p>\n              <div className=\"mt-2 text-sm bg-gray-50 p-2 rounded max-h-40 overflow-y-auto\">\n                {selectedPaper.abstract}\n              </div>\n              <div className=\"mt-2 text-sm\">\n                <strong>Similarity Score:</strong> {(selectedPaper.score * 100).toFixed(1)}%\n              </div>\n              {selectedPaper.link && (\n                <a \n                  href={selectedPaper.link} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-sm text-blue-600 hover:underline mt-2 block\"\n                >\n                  View Paper\n                </a>\n              )}\n            </div>\n          ) : (\n            <p className=\"text-gray-500\">Hover over a point to see paper details</p>\n          )}\n        </div>\n      </div>\n      \n      <div className=\"mt-6\">\n        <h2 className=\"text-xl font-semibold mb-3\">Top Results</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {searchResults.slice(0, 6).map(paper => (\n            <div \n              key={paper.id} \n              className=\"border rounded p-3 bg-white shadow-sm hover:shadow-md transition-shadow\"\n              onMouseEnter={() => handlePaperSelect(paper)}\n              style={{\n                borderColor: selectedPaper && selectedPaper.id === paper.id ? '#3b82f6' : '#e5e7eb'\n              }}\n            >\n              <h3 className=\"font-medium\">{paper.title}</h3>\n              <p className=\"text-sm text-gray-700\">{paper.authors}</p>\n              <div className=\"flex justify-between text-sm text-gray-600 mt-1\">\n                <span>{paper.venue}</span>\n                <span>Score: {(paper.score * 100).toFixed(1)}%</span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AcademicPaperSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}